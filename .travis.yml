sudo: required
dist: xenial

services:
  - docker

script:
  - make --no-builtin-rules build
  - make --no-builtin-rules test
  - 'if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin && make push; fi'
